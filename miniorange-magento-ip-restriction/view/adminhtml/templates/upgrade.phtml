<?php
$products = [
    [
        'image' => $block->getViewFileUrl('MiniOrange_IpRestriction::images/sso.png'),
        'alt' => 'Single Sign On',
        'title' => 'Single Sign On',
        'description' => 'Login into Magento/Adobe Commerce using any Third Party Identity Provider User credentials',
        'link' => 'https://commercemarketplace.adobe.com/miniorange-inc-miniorange-oauth-sso.html'
    ],
    [
        'image' => $block->getViewFileUrl('MiniOrange_IpRestriction::images/idp_upgrade.png'),
        'alt' => 'SAML IDP',
        'title' => 'SAML IDP',
        'description' => 'Login into any third party applications using Magento credentials.',
        'link' => 'https://commercemarketplace.adobe.com/miniorange-inc-idpsaml.html'
    ],
    [
        'image' => $block->getViewFileUrl('MiniOrange_IpRestriction::images/scim_upgrade.png'),
        'alt' => 'Scim User Provisioning',
        'title' => 'User Provisioning & Sync',
        'description' => 'Automate real-time two-way user sync, including creation, updates, and deletions, '
            . 'between your applications and Magento.',
        'link' => 'https://commercemarketplace.adobe.com/miniorange-inc-scim.html'
    ],
    [
        'image' => $block->getViewFileUrl('MiniOrange_IpRestriction::images/otp_upgrade.png'),
        'alt' => 'Mobile Login',
        'title' => 'Mobile Login',
        'description' => 'Log in to Magento store using mobile number/email â€” no password required.',
        'link' => 'https://commercemarketplace.adobe.com/miniorange-inc-otp-verification.html'
    ],
    [
        'image' => $block->getViewFileUrl('MiniOrange_IpRestriction::images/ldap_upgrade.png'),
        'alt' => 'LDAP Login',
        'title' => 'LDAP / Active Directory Login Integration',
        'description' => 'Log in to Magento using LDAP/AD credentials from Active Directory, OpenLDAP, '
            . 'OpenDS, FreeIPA, Synology, and more.',
        'link' => 'https://commercemarketplace.adobe.com/miniorange-inc-miniorange-ldap.html'
    ],
    [
        'image' => $block->getViewFileUrl('MiniOrange_IpRestriction::images/google_upgrade.png'),
        'alt' => 'Google One Tap Login',
        'title' => 'Google One Tap Login',
        'description' => 'One Click sign in or register on your Magento store using Google Account credentials.',
        'link' => 'https://commercemarketplace.adobe.com/miniorange-inc-google-one-tap-login.html'
    ],
    [
        'image' => $block->getViewFileUrl('MiniOrange_IpRestriction::images/security_upgrade.png'),
        'alt' => 'Security Suite',
        'title' => 'Security Suite',
        'description' => 'Secure your Magento store with robust security tools.',
        'link' => 'https://plugins.miniorange.com/magento-2-security-suite-extension'
    ],
    [
        'image' => $block->getViewFileUrl('MiniOrange_IpRestriction::images/social_upgrade.png'),
        'alt' => 'Social Login & Share',
        'title' => 'Social Login & Share',
        'description' => 'Log in to Magento using social login credentials, including Facebook, Instagram, '
            . 'Google, Twitter, LinkedIn, and more.',
        'link' => 'https://commercemarketplace.adobe.com/miniorange-inc-miniorange-social-login.html'
    ],
];
$plan_name = 'IP Restriction Extension';
?>


<!-- Main Content -->
<div class="main-content">
    <div class="container">
        <div class="main-panel_upgrade background_gray">
            <div class="panel-content">
                <!-- Ultra Simple Upgrade Banner -->
                <div class="upgrade-banner">
                    <div class="plan-info">
                        <div class="plan-status">Current Plan</div>
                        <div class="panel-title_report">IP Restriction Free <span
                                class="plan-version">Version <?= $block->escapeHtml($block->getCurrentVersion()) ?></span>
                        </div>
                    </div>
                    <span>
                        <a href="https://plugins.miniorange.com/magento-recaptcha-ip-rate-limiting"
                           target="_blank" class="btn btn-primary" style="float: right;font-size:1.4rem">
                            <i class="fas fa-arrow-circle-up"></i>
                            Click Here to Upgrade
                        </a>
                    </span>
                </div>
            </div>
        </div>

        <!-- Related Products -->
        <div class="main-panel_upgrade">
            <div class="panel-header">
                <div class="panel-title-container">
                    <h2 class="panel-title">Related Products</h2>
                    <p class="panel-subtitle">Enhance your Magento store with our complementary extensions</p>
                </div>
                <div class="panel-actions">
                    <div class="btn btn-outline" onclick="openAllProducts()">
                        <i class="fas fa-th-large"></i>
                        View All Products
                    </div>
                </div>
            </div>

            <div class="panel-content">
                <div class="products-grid">
                    <?php foreach ($products as $product): ?>
                        <div class="product-card">
                            <div class="product-image">
                                <img src="<?= $block->escapeUrl($product['image']) ?>" 
                                     loading="lazy" 
                                     alt="<?= $block->escapeHtmlAttr($product['alt']) ?>">
                            </div>
                            <div class="product-details">
                                <h3 class="product-title"><?= $block->escapeHtml($product['title']) ?></h3>
                                <p class="product-description"><?= $block->escapeHtml($product['description']) ?></p>
                                <div class="product-actions">
                                    <a href="<?= $block->escapeUrl($product['link']) ?>" 
                                       target="_blank"
                                       class="btn btn-primary position">View Details</a>
                                </div>
                            </div>
                        </div>
                    <?php endforeach; ?>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function openAllProducts() {
    window.open('https://plugins.miniorange.com/', '_blank');
}
</script>
